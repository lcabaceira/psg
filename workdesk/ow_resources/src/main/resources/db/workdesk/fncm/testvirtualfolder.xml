<?xml version="1.0" ?>
<VirtualFolderDescription>

<!-- ==========================================================================
        EXAMPLE SEARCH TEMPLATE FOR VIRTUAL FOLDERS

        CONFIGURATION HELP
===============================================================================

        How to deploy:

            1. In this search template, the following section occurs twice:

                    <objectstores mergeoption="union">
                        <objectstore name="DemoStore1" />
                    </objectstores>

               Please make sure the Symbolic Name of a valid Object Store
               is provided.

            2. Put this document into ow_app/other in the Object Store you
               configured as Default Object Store in owbootstrap.xml
               - Document Class: Document
               - Document Title: "testvirtualfolder"

            3. In a standard Alfresco Workdesk installation, click on "File Search"
               or "Aktensuche" in the main navigation bar.
            
_______________________________________________________________________________

        <root>, <node>:
        
            Both have the same structure. They may contain

            1. A <search> section, followed by

            2. a <refinecriteria> section and

            3. one or more additional <node> sections, describing subnodes of
               this node. Thus, we have a recursive structure.

            Both have an "containsdocs" boolean attribute, defining whether
            documents (and folders) are supposed to be shown in the result list
            at this level or not. If "containsdocs" is true, please do not
            forget to also add a <refinecriteria> section at this level, i.e.
            to delete criteria refinements of subnodes.
            
            When a <search> section is present, a completely new search begins
            at that node and is active for all subnodes until a subnode again
            defines a new search.

_______________________________________________________________________________

        Attribute "versionselection":

            Valid values are:
                "currentversion",
                "allversions",
                "releasedversion",
                "checkedoutversion",
                "inprocessversion",
                "majorversions",
                "minorversions"
                
            Note: When searching for folders, "releasedversion" has to be taken

_______________________________________________________________________________

        <from><class /></from>:

            Valid values for the "symname" attribute are:
                "document",
                "folder",
                "customobject",
                "common" for a combination of the above

_______________________________________________________________________________

        <selectprop />:

            In the "symname" attribute, provide the Symbolic Name of the
            property you want to retrieve.
            
            Please make sure that all properties you want to use in the
            where-clause are listed here.

_______________________________________________________________________________

        Attribute "editproperty":

            Valid values are:
            "editable": An input line is rendered right beneath the main
                        navigation bar. Those attributes MUST NOT be defined
                        in the current and subsequent <refinecriteria>
                        sections.
                            
                        Hint: When leaving all input lines empty, AWD is not
                              going to fire a search because it may not be
                              narrow enough and cause a system slow down. Thus,
                              you at least have to enter a wildcard
                              (default "*") in one of the input lines.
                            
            "hidden": No input line is rendered. Those attributes HAVE TO be
                      defined in the current and subsequent <refinecriteria>
                      sections.
                      
                      Hint: In a semi-virtual folder structure, attributes can
                            be passed from the physical root to the search
                            template. This is done in the
                            <SemiVirtualRecordClasses> node in owbootstrap.xml.
                            In order to receive those attribs in the search
                            template, they have to be added to the where-clause
                            but not to your criteria refinements. Please be
                            aware that overwriting those attribs in citeria
                            refinements destroys the initial value from the
                            physical root.  

_______________________________________________________________________________

        <isnull>, <notnull>:

			Unlike other operators like <eq>, <gte>, <like>..., the <isnull>
			and <notnull> operators do not need a literal and thus they are
			valid for the whole search. You can use <and> or <or> to logically combine them with other
			properties.
			
=========================================================================== -->



    <!-- ==========
        (optional): java class name of virtual folder factory to use.
        Leave empty to use standard:
        com.wewebu.ow.server.ecm.OwStandardVirtualFolderObjectFactory
    =========== -->
    <ClassName />

    <root name="MIME-Types" containsdocs="true">

        <search versionselection="currentversion">

            <objectstores mergeoption="union">
                <objectstore name="DemoStore1" /> 
            </objectstores>
			
			<!--
			<folders>
				<folder pathname="/xyz/uvw" searchsubfolders="true" view="hidden">
					<objectstore id="DemoStore1" /> 
				</folder>
				<folder pathname="/abc" searchsubfolders="true" view="hidden">
					<objectstore id="DemoStore1" />
				</folder>
			</folders>
			-->
			
            <from>
                <class symname="document" /> 
            </from>

            <select>
                <selectprops>
                    <selectprop symname="DocumentTitle" />
                    <selectprop symname="MimeType" />
                    <selectprop symname="ContentSize" />
                </selectprops>
            </select>

            <where>
                <and>
                    <like>
                        <whereprop editproperty="editable" symname="DocumentTitle" />
                    </like>
                    <like>
                        <whereprop editproperty="hidden" symname="MimeType" />
                    </like>
                    
					<!--
					Hint: If one property is required two or more times then it has to be specified with a 'uniquename'.
					      In all 'refinecriterias' the uniquename has to be provided instead of the 'symname'!
					-->
					<gte>
                        <whereprop editproperty="hidden" symname="ContentSize" uniquename="gte" />
                    </gte>
					<lte>
                        <whereprop editproperty="hidden" symname="ContentSize" uniquename="lte" />
                    </lte>
                </and>
            </where>
<!--            
            <subclasses>
                <subclass objecttype="document" symname="[define subclass here]" />
            </subclasses>
-->
        </search>
        
        <refinecriteria>
            <literal symname="MimeType" />
            <literal symname="gte" />
			<literal symname="lte" />
        </refinecriteria>

        <node name="Text file" containsdocs="true">
            <refinecriteria>
                <literal symname="MimeType">text/plain</literal>
                <literal symname="gte" />
				<literal symname="lte" />
            </refinecriteria>
        </node>
        
        <node name="Adobe PDF" containsdocs="true">
            <refinecriteria>
                <literal symname="MimeType">application/pdf</literal>
                <literal symname="gte" />
				<literal symname="lte" />
            </refinecriteria>
        </node>
        
        <node name="TIFF" containsdocs="true">
		    <!-- ==========
		    	Here, we have a two level search hierarchy depending on two
		    	metadata "MimeType" and "ContentSize".
		    =========== -->
            <refinecriteria>
                <literal symname="MimeType">image/tiff</literal>
                
				<!--
				Hint: If there exists an uniquename the uniquename has to be provided instead of the symname!
				-->
				<literal symname="gte" />
				<literal symname="lte" />
            </refinecriteria>

            <node name="100 KB or smaller" containsdocs="true">
                <refinecriteria>
                    <literal symname="MimeType">image/tiff</literal>
                    <literal symname="gte" />
					<literal symname="lte">102400</literal>
                </refinecriteria>
            </node>
            
            <node name="100 KB or bigger" containsdocs="true">
                <refinecriteria>
                    <literal symname="MimeType">image/tiff</literal>
                    <literal symname="gte">102400</literal>
					<literal symname="lte" />
                </refinecriteria>
            </node>
        </node>
        
        <node name="Microsoft Office" containsdocs="true">
		    <!-- ==========
		    	Here, we have a two level search hierarchy depending on one
		    	metadata "MimeType".
		    =========== -->
            <refinecriteria>
                <literal symname="MimeType">application/ms*</literal>
                <literal symname="gte" />
				<literal symname="lte" />
            </refinecriteria>

            <node name="Microsoft Word" containsdocs="true">
                <refinecriteria>
                    <literal symname="MimeType">application/msword</literal>
                    <literal symname="gte" />
					<literal symname="lte" />
                </refinecriteria>
            </node>
            
            <node name="Microsoft Excel" containsdocs="true">
                <refinecriteria>
                    <literal symname="MimeType">application/msexcel</literal>
                    <literal symname="gte" />
					<literal symname="lte" />
                </refinecriteria>
            </node>
            
            <node name="Microsoft Powerpoint" containsdocs="true">
                <refinecriteria>
                    <literal symname="MimeType">application/mspowerpoint</literal>
                    <literal symname="gte" />
					<literal symname="lte" />
                </refinecriteria>
            </node>
            
            <node name="Microsoft Outlook" containsdocs="true">
                <refinecriteria>
                    <literal symname="MimeType">application/msoutlook</literal>
                    <literal symname="gte" />
					<literal symname="lte" />
                </refinecriteria>
            </node>
            
        </node>
        
        <node name="Null" containsdocs="true">
		    <!-- ==========
		    	Here, a new search is defined. In this node and all subnodes,
		    	the search defined in the <root> section is not valid anymore.
		    	However, attributes from the physical root of a semi-virtual
		    	folder structure are available to the whole search template.
		    =========== -->
            <search versionselection="currentversion">

                <objectstores mergeoption="union">
                    <objectstore name="DemoStore1" /> 
                </objectstores>

                <from>
                    <class symname="document" /> 
                </from>

                <select>
                    <selectprops>
                        <selectprop symname="DocumentTitle" />
                        <selectprop symname="MimeType" />
                        <selectprop symname="MajorVersionNumber" />
                    </selectprops>
                </select>

                <where>
                    <and>
                        <like>
                            <whereprop editproperty="editable" symname="DocumentTitle" />
                        </like>
                        <eq>
                            <whereprop editproperty="hidden" symname="MajorVersionNumber" />
                        </eq>
                        <isnull>
                            <whereprop editproperty="hidden" symname="MimeType" />
                        </isnull>
                    </and>
                </where>
					
				<!--
                <subclasses>
                    <subclass objecttype="document" symname="[define subclass here]" />
                </subclasses>
				-->
				
            </search>
            
            <refinecriteria>
                <literal symname="MajorVersionNumber" />
            </refinecriteria>

            <node name="Major Version 1" containsdocs="true">
                <refinecriteria>
                    <literal symname="MajorVersionNumber">1</literal>
                </refinecriteria>
            </node>

            <node name="Major Version 2" containsdocs="true">
                <refinecriteria>
                    <literal symname="MajorVersionNumber">2</literal>
                </refinecriteria>
            </node>

            <node name="Major Version 3" containsdocs="true">
                <refinecriteria>
                    <literal symname="MajorVersionNumber">3</literal>
                </refinecriteria>
            </node>
        </node>
        
        <node name="Independent Search for Folders" containsdocs="true">
		    <!-- ==========
		    	Here, a new search is defined. In this node and all subnodes,
		    	the search defined in the <root> section is not valid anymore.
		    	However, attributes from the physical root of a semi-virtual
		    	folder structure are available to the whole search template.
		    =========== -->
            <search versionselection="releasedversion">

                <objectstores mergeoption="union">
                    <objectstore name="DemoStore1" /> 
                </objectstores>

                <from>
                    <class symname="folder" /> 
                </from>

                <select>
                    <selectprops>
                        <selectprop symname="FolderName" />
                        <selectprop symname="ContainerType" />
                    </selectprops>
                </select>

                <where>
                    <and>
                        <like>
                            <whereprop editproperty="hidden" symname="FolderName" />
                        </like>
                    </and>
                </where>
<!--            
                <subclasses>
                    <subclass objecttype="document" symname="[define subclass here]" />
                </subclasses>
-->
            </search>
            
            <refinecriteria>
                <literal symname="FolderName" />
            </refinecriteria>

            <node name="A..." containsdocs="true">
                <refinecriteria>
                    <literal symname="FolderName">A*</literal>
                </refinecriteria>
            </node>

            <node name="B..." containsdocs="true">
                <refinecriteria>
                    <literal symname="FolderName">B*</literal>
                </refinecriteria>
            </node>

            <node name="C..." containsdocs="true">
                <refinecriteria>
                    <literal symname="FolderName">C*</literal>
                </refinecriteria>
            </node>
        </node>
                
    </root>

</VirtualFolderDescription>
